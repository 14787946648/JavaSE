<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="style/style.css">

    <style type="text/css" media="print">
        .noprint {
            display: none
        }
        
        .print {
            display: block !important;
        }
    </style>
</head>

<body>
    <div id="app">
        <header class="el-header noprint">
            <div class="icon-btns">
                <i class="icon-list" @click="changeLeftMenu"></i>
                <i class="icon-skip_previous" v-bind:class="{'disabled': currentPage == 1}" @click="changeCurrentPage('first')"></i>
                <i class="icon-play_arrow prev-icon" v-bind:class="{'disabled': currentPage == 1}" @click="changeCurrentPage('prev')"></i>
                <i class="icon-play_arrow" v-bind:class="{'disabled': currentPage == pageNum}" @click="changeCurrentPage('next')"></i>
                <i class="icon-skip_next" v-bind:class="{'disabled': currentPage == pageNum}" @click="changeCurrentPage('last')"></i>
                <select v-model="currentPage">
                    <option v-for="page in pageNum" v-bind:value="page">page {{ page }}</option>
                </select>
                <i class="icon-zoom_in" v-bind:class="{'disabled': zoomNum == 2}" @click="modifyZoom('in')"></i>
                <select v-model="zoomNum">
                    <option value="0.5">50%</option>
                    <option value="0.6">60%</option>
                    <option value="0.7">70%</option>
                    <option value="0.8">80%</option>
                    <option value="0.9">90%</option>
                    <option value="1.0" selected>100%</option>
                    <option value="1.1">110%</option>
                    <option value="1.2">120%</option>
                    <option value="1.3">130%</option>
                    <option value="1.4">140%</option>
                    <option value="1.5">150%</option>
                    <option value="1.6">160%</option>
                    <option value="1.7">170%</option>
                    <option value="1.8">180%</option>
                    <option value="1.9">190%</option>
                    <option value="2.0">200%</option>
                </select>
                <i class="icon-zoom_out" v-bind:class="{'disabled': zoomNum == 0.5}" @click="modifyZoom('out')"></i>
                <i class="icon-format_align_left" @click="textAlign = 'left'"></i>
                <i class="icon-format_align_center" @click="textAlign = 'center'"></i>
                <i class="icon-format_align_right" @click="textAlign = 'right'"></i>
                <i class="icon-print" @click="window.print()"></i>
            </div>
        </header>

        <aside class="noprint" width="240px" v-show="ifMenuShow">
            <nav class="tabNav">
                <ul>
                    <li v-bind:class="{ 'curr': currentNav == 0 }" @click="currentNav = 0">Page</li>
                    <li v-bind:class="{ 'curr': currentNav == 1 }" @click="currentNav = 1">Bookmark</li>
                </ul>

                <div class="clear"></div>
            </nav>

            <div class="tab-conent scrollbar" v-bind:style="{ height: asideHeight + 'px' }">

            <section v-show="currentNav == 0">
                <ul class="page-menu">
                    <li v-for="page in pageNum" v-bind:class="{ 'curr': currentPage == page }" @click="changePage(page)"><i class="icon-file-text2"></i> page {{ page }}</li>
                </ul>
            </section>

            <section v-show="currentNav == 1">
                <ul class="page-menu">
                    <li v-for="page in pageNum" v-bind:class="{ 'curr': currentPage == page }" @click="changePage(page)"><i class="icon-turned_in_not"></i> Bookmark {{ page }}</li>
                </ul>
            </section>
        </div>

        </aside>
        <div class="main scrollbar noprint"  v-bind:style="{ height: mainHeight + 'px' }" v-bind:class="{ 'mainLeftM': ifMenuShow, 'aleft': textAlign === 'left','acenter': textAlign === 'center','aright': textAlign === 'right'}">
            <div class="conent" v-html="pageContent" v-bind:style="zoomStyle"></div>

            <div class="clear"></div>
        </div>

        <!--专门只为打印的内容-->
        <div class="conent print" style="display:none" v-html="pageContent"></div>
    </div>
</body>
<!-- 先引入 Vue -->
<script src="js/vue.min.js"></script>
<script>

var app = new Vue({
        el: '#app',
        data: function() {
            return {
                // visible: false,
                isCollapse: false,
                currentNav: 0,
                activeName2: 'first',
                pageNum: 1, 
                currentPage: 1,
                pageContent: '',
                asideHeight: 300,
                mainHeight: 300,
                ifMenuShow: true,
                zoomNum: '1.0',
                textAlign: 'left',
                zoomStyle: {},
                pageDatas: ['<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00001.jpg"/></nobr></div><p><span style="font-family:Open Sans;font-size:21.946720px;font-weight:bold;color:#333333;"><span style="position:absolute;top:106.441002px;left:69.810577px"><nobr>day11 <span style="font-family:微软雅黑;">【 网络编程】 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:165.635422px;left:69.810585px"><nobr>主要内容</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:216.842453px;left:99.823189px"><nobr>软件架构<span style="font-family:Open Sans;">C S </span><span style="font-family:微软雅黑;">／ </span><span style="font-family:Open Sans;">BS </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:236.980881px;left:99.823189px"><nobr>网络通信三要素</nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:256.859222px;left:99.823189px"><nobr>TCP <span style="font-family:微软雅黑;">通信</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:276.867676px;left:99.823189px"><nobr>Socket <span style="font-family:微软雅黑;">套接字</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:296.876068px;left:99.823189px"><nobr>ServerSocket </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:326.703125px;left:69.810585px"><nobr>教学目标</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:376.909668px;left:101.824036px"><nobr>能够辨别<span style="font-family:Open Sans;">U DP </span><span style="font-family:微软雅黑;">和</span><span style="font-family:Open Sans;">T CP </span><span style="font-family:微软雅黑;">协议特点</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:403.921051px;left:101.824036px"><nobr>能够说出<span style="font-family:Open Sans;">T CP </span><span style="font-family:微软雅黑;">协议下两个常用类名称</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:429.931976px;left:101.824036px"><nobr>能够编写<span style="font-family:Open Sans;">T CP </span><span style="font-family:微软雅黑;">协议下字符串数据传输程序</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:456.943237px;left:101.824036px"><nobr>能够理解<span style="font-family:Open Sans;">T CP </span><span style="font-family:微软雅黑;">协议下文件上传案例</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:482.954224px;left:101.824036px"><nobr>能够理解<span style="font-family:Open Sans;">T CP </span><span style="font-family:微软雅黑;">协议下案例</span><span style="font-family:Open Sans;">2 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:21.946720px;font-weight:bold;color:#333333;"><span style="position:absolute;top:511.903870px;left:69.810577px"><nobr>第一章网络编程入门</nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:570.578003px;left:69.810577px"><nobr>1.1 <span style="font-family:微软雅黑;">软件结构</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:622.012573px;left:99.823189px"><nobr>C/S <span style="font-family:微软雅黑;">结构： 全称为</span><span style="font-family:Open Sans;">C lient/Server </span><span style="font-family:微软雅黑;">结构， 是指客户端和服务器结构。 常见程序有Ｑ Ｑ 、 迅雷等软件。 </span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00002.jpg"/></nobr></div><p><span style="font-family:Open Sans;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:549.982361px;left:69.810577px"><nobr>B/S <span style="font-family:微软雅黑;">结构： 全称为</span><span style="font-family:Open Sans;">B rowser/Server </span><span style="font-family:微软雅黑;">结构， 是指浏览器和服务器结构。 常见浏览器有谷歌、 火狐等。 </span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00003.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:569.120300px;left:69.810577px"><nobr>两种架构各有优势， 但是无论哪种架构， 都离不开网络的支持。 网络编程， 就是在一定的协议下， 实现两台计算机</nobr></span><span style="position:absolute;top:589.128723px;left:69.810577px"><nobr>的通信的程序。 </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:618.598083px;left:69.810577px"><nobr>1.2 <span style="font-family:微软雅黑;">网络通信协议</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:670.162781px;left:99.823189px"><nobr>网络通信协议： 通信协议是对计算机必须遵守的规则， 只有遵守这些规则， 计算机之间才能进行通信。 这就</nobr></span><span style="position:absolute;top:690.171204px;left:99.823189px"><nobr>好比在道路中行驶的汽车一定要遵守交通规则一样， 协议中对数据的传输格式、 传输速率、 传输步骤等做了</nobr></span><span style="position:absolute;top:710.179504px;left:99.823189px"><nobr>统一规定， 通信双方必须同时遵守， 最终完成数据交换。 </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:741.062500px;left:99.823189px"><nobr>TCP/IP <span style="font-family:微软雅黑;">协议： 传输控制协议</span><span style="font-family:Open Sans;">/ </span><span style="font-family:微软雅黑;">因特网互联协议</span><span style="font-family:Open Sans;">( Transmission Control Protocol/Internet Protocol) </span><span style="font-family:微软雅黑;">， 是</span></nobr></span><span style="position:absolute;top:761.070984px;left:99.823189px"><nobr>Internet <span style="font-family:微软雅黑;">最基本、 最广泛的协议。 它定义了计算机如何连入因特网， 以及数据如何在它们之间传输的标准。 它</span></nobr></span><span style="position:absolute;top:781.079407px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">的内部包含一系列的用于处理数据通信的协议， 并采用了</span><span style="font-family:Open Sans;">4 </span><span style="font-family:微软雅黑;">层的分层模型， 每一层都呼叫它的下一层所提供的</span></nobr></span><span style="position:absolute;top:801.217773px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">协议来完成自己的需求。 </span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00004.jpg"/></nobr></div><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:399.505951px;left:69.810577px"><nobr>1.3 <span style="font-family:微软雅黑;">协议分类</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:451.070648px;left:69.810577px"><nobr>通信的协议还是比较复杂的， <span style="font-family:Consolas;font-size:8.778688px;">java.net </span><span style="font-family:微软雅黑;font-size:9.754098px;">包中包含的类和接口， 它们提供低层次的通信细节。 我们可以直接使用这</span></nobr></span><span style="position:absolute;top:471.079102px;left:69.810577px"><nobr>些类和接口， 来专注于网络程序开发， 而不用考虑通信的细节。 </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:501.091797px;left:74.812683px"><nobr>java.net <span style="font-family:微软雅黑;font-size:9.754098px;">包中提供了两种常见的网络协议的支持： </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:531.974731px;left:99.823189px"><nobr>TCP <span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">： 传输控制协议</span><span style="font-family:Open Sans;">(Transmission Control Protocol) </span><span style="font-family:微软雅黑;">。 </span><span style="font-family:Open Sans;">TCP </span><span style="font-family:微软雅黑;">协议是面向连接的通信协议， 即传输数据之前， </span></nobr></span><span style="position:absolute;top:552.112976px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">在发送端和接收端建立逻辑连接， 然后再传输数据， 它提供了两台计算机之间可靠无差错的数据传输。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:577.993896px;left:129.835800px"><nobr>三次握手： <span style="font-family:Open Sans;">TCP </span><span style="font-family:微软雅黑;">协议中， 在发送数据的准备阶段， 客户端与服务器之间的三次交互， 以保证连接的可</span></nobr></span><span style="position:absolute;top:598.132507px;left:129.835800px"><nobr>靠。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:625.143860px;left:159.848419px"><nobr>第一次握手， 客户端向服务器端发出连接请求， 等待服务器确认。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:645.152344px;left:159.848419px"><nobr>第二次握手， 服务器端向客户端回送一个响应， 通知客户端收到了连接请求。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:665.160461px;left:159.848419px"><nobr>第三次握手， 客户端再次向服务器端发送确认信息， 确认连接。 整个交互过程如下图所示。 </nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00005.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:461.945435px;left:73.186996px"><nobr>完成三次握手， 连接建立后， 客户端和服务器就可以开始进行数据传输了。 由于这种面向连接的特性， <span style="font-family:Open Sans;">TCP </span><span style="font-family:微软雅黑;">协议可</span></nobr></span><span style="position:absolute;top:482.083984px;left:69.810577px"><nobr>以保证传输数据的安全， 所以应用十分广泛， 例如下载文件、 浏览网页等。 </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:512.966919px;left:99.823189px"><nobr>UDP <span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">： 用户数据报协议</span><span style="font-family:Open Sans;">( User Datagram Protocol) </span><span style="font-family:微软雅黑;">。 </span><span style="font-family:Open Sans;">UDP </span><span style="font-family:微软雅黑;">协议是一个面向无连接的协议。 传输数据时， 不需</span></nobr></span><span style="position:absolute;top:533.105469px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">要建立连接， 不管对方端服务是否启动， 直接将数据、 数据源和目的地都封装在数据包中， 直接发送。 每个</span></nobr></span><span style="position:absolute;top:552.983826px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">数据包的大小限制在</span><span style="font-family:Open Sans;">64k </span><span style="font-family:微软雅黑;">以内。 它是不可靠协议， 因为无连接， 所以传输速度快， 但是容易丢失数据。 日常应</span></nobr></span><span style="position:absolute;top:572.991943px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">用中</span><span style="font-family:Open Sans;">, </span><span style="font-family:微软雅黑;">例如视频会议、 </span><span style="font-family:Open Sans;">QQ </span><span style="font-family:微软雅黑;">聊天等。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:602.591553px;left:69.810577px"><nobr>1.4 <span style="font-family:微软雅黑;">网络编程三要素</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:653.278931px;left:69.810577px"><nobr>协议</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:694.173157px;left:99.823189px"><nobr>协议： 计算机网络通信必须遵守的规则， 已经介绍过了， 不再赘述。 </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:726.114441px;left:69.810577px"><nobr>IP <span style="font-family:微软雅黑;">地址</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:767.073730px;left:99.823189px"><nobr>IP <span style="font-family:微软雅黑;">地址： 指互联网协议地址（ </span><span style="font-family:Open Sans;">Internet Protocol Address </span><span style="font-family:微软雅黑;">） ， 俗称</span><span style="font-family:Open Sans;">I P </span><span style="font-family:微软雅黑;">。 </span><span style="font-family:Open Sans;">IP </span><span style="font-family:微软雅黑;">地址用来给一个网络中的计算机设</span></nobr></span><span style="position:absolute;top:787.082214px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">备做唯一的编号。 假如我们把</span><span style="font-family:Open Sans;">“ </span><span style="font-family:微软雅黑;">个人电脑</span><span style="font-family:Open Sans;">” </span><span style="font-family:微软雅黑;">比作</span><span style="font-family:Open Sans;">“ </span><span style="font-family:微软雅黑;">一台电话</span><span style="font-family:Open Sans;">” </span><span style="font-family:微软雅黑;">的话， 那么</span><span style="font-family:Open Sans;">“ IP </span><span style="font-family:微软雅黑;">地址</span><span style="font-family:Open Sans;">” </span><span style="font-family:微软雅黑;">就相当于</span><span style="font-family:Open Sans;">“ </span><span style="font-family:微软雅黑;">电话号码</span><span style="font-family:Open Sans;">” </span><span style="font-family:微软雅黑;">。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:817.094543px;left:69.810577px"><nobr>IP <span style="font-family:微软雅黑;">地址分类</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:847.107239px;left:99.823189px"><nobr>IPv4 <span style="font-family:微软雅黑;">： 是一个</span><span style="font-family:Open Sans;">3 2 </span><span style="font-family:微软雅黑;">位的二进制数， 通常被分为</span><span style="font-family:Open Sans;">4 </span><span style="font-family:微软雅黑;">个字节， 表示成</span><span style="font-family:Consolas;font-size:8.778688px;">a.b.c.d </span><span style="font-family:微软雅黑;font-size:9.754098px;">的形式， 例如</span><span style="font-family:Consolas;font-size:8.778688px;">192.168.65.100 </span><span style="font-family:微软雅黑;font-size:9.754098px;">。 其</span></nobr></span><span style="position:absolute;top:867.115723px;left:99.823189px"><nobr><span style="font-family:微软雅黑;">中</span><span style="font-family:Open Sans;">a </span><span style="font-family:微软雅黑;">、 </span><span style="font-family:Open Sans;">b </span><span style="font-family:微软雅黑;">、 </span><span style="font-family:Open Sans;">c </span><span style="font-family:微软雅黑;">、 </span><span style="font-family:Open Sans;">d </span><span style="font-family:微软雅黑;">都是</span><span style="font-family:Open Sans;">0 ~255 </span><span style="font-family:微软雅黑;">之间的十进制整数， 那么最多可以表示</span><span style="font-family:Open Sans;">4 2 </span><span style="font-family:微软雅黑;">亿个。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:894.127136px;left:99.823189px"><nobr>IPv6 <span style="font-family:微软雅黑;">： 由于互联网的蓬勃发展， </span><span style="font-family:Open Sans;">IP </span><span style="font-family:微软雅黑;">地址的需求量愈来愈大， 但是网络地址资源有限， 使得</span><span style="font-family:Open Sans;">I P </span><span style="font-family:微软雅黑;">的分配越发紧张。 </span></nobr></span><span style="position:absolute;top:914.135620px;left:99.823189px"><nobr><span style="font-family:微软雅黑;">有资料显示， 全球</span><span style="font-family:Open Sans;">IPv4 </span><span style="font-family:微软雅黑;">地址在</span><span style="font-family:Open Sans;">2011 </span><span style="font-family:微软雅黑;">年</span><span style="font-family:Open Sans;">2 </span><span style="font-family:微软雅黑;">月分配完毕。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:940.146240px;left:99.823189px"><nobr>为了扩大地址空间， 拟通过<span style="font-family:Open Sans;">I Pv6 </span><span style="font-family:微软雅黑;">重新定义地址空间， 采用</span><span style="font-family:Open Sans;">1 28 </span><span style="font-family:微软雅黑;">位地址长度， 每</span><span style="font-family:Open Sans;">1 6 </span><span style="font-family:微软雅黑;">个字节一组， 分成</span><span style="font-family:Open Sans;">8 </span><span style="font-family:微软雅黑;">组十六进</span></nobr></span><span style="position:absolute;top:960.284851px;left:99.823189px"><nobr>制数， 表示成<span style="font-family:Consolas;font-size:8.778688px;">ABCD:EF01:2345:6789:ABCD:EF01:2345:6789 </span><span style="font-family:微软雅黑;font-size:9.754098px;">， 号称可以为全世界的每一粒沙子编上一个网</span></nobr></span><span style="position:absolute;top:980.293274px;left:99.823189px"><nobr>址， 这样就解决了网络地址资源数量不够的问题。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:1011.306335px;left:69.810577px"><nobr>常用命令</nobr></span></span></p>','<div style="position:absolute;top:76.374512px;left:0.000000px"><nobr><img height="969.000000" width="794.000000" src ="bgimg/bg00006.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:75.783363px;left:99.823189px"><nobr>查看本机<span style="font-family:Open Sans;">I P </span><span style="font-family:微软雅黑;">地址， 在控制台输入： </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:158.948563px;left:99.823189px"><nobr>检查网络是否连通， 在控制台输入： </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:260.861176px;left:69.810577px"><nobr>特殊的<span style="font-family:Open Sans;">I P </span><span style="font-family:微软雅黑;">地址</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:290.873871px;left:99.823189px"><nobr>本机<span style="font-family:Open Sans;">I P </span><span style="font-family:微软雅黑;">地址： </span><span style="font-family:Consolas;font-size:8.778688px;">127.0.0.1 </span><span style="font-family:微软雅黑;font-size:9.754098px;">、 </span><span style="font-family:Consolas;font-size:8.778688px;">localhost </span><span style="font-family:微软雅黑;font-size:9.754098px;">。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:323.140289px;left:69.810577px"><nobr>端口号</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:364.034515px;left:69.810577px"><nobr>网络的通信， 本质上是两个进程（ 应用程序） 的通信。 每台计算机都有很多的进程， 那么在网络通信时， 如何区分</nobr></span><span style="position:absolute;top:384.042969px;left:69.810577px"><nobr>这些进程呢？ </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:413.925629px;left:69.810577px"><nobr>如果说<span style="font-family:Open Sans;font-weight:bold;">I P </span><span style="font-family:微软雅黑;">地址可以唯一标识网络中的设备， 那么端口号就可以唯一标识设备中的进程（ 应用程序） 了。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:444.938599px;left:99.823189px"><nobr>端口号： 用两个字节表示的整数， 它的取值范围是<span style="font-family:Open Sans;">0 ~65535 </span><span style="font-family:微软雅黑;font-style:normal;font-weight:normal;">。 其中， </span><span style="font-family:Open Sans;">0~1023 </span><span style="font-family:微软雅黑;">之间的端口号用于一些知名的网</span></nobr></span><span style="position:absolute;top:464.947052px;left:99.823189px"><nobr>络服务和应用， 普通的应用程序需要使用<span style="font-family:Open Sans;">1024 </span><span style="font-family:微软雅黑;">以上的端口号。 如果端口号被另外一个服务或应用所占用， 会</span></nobr></span><span style="position:absolute;top:485.085602px;left:99.823189px"><nobr>导致当前程序启动失败。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:514.967896px;left:69.810577px"><nobr>利用<span style="font-size:8.778688px;">协议</span><span style="font-family:Open Sans;font-size:9.754098px;">+ </span><span style="font-family:Consolas;font-size:8.778688px;">IP </span><span style="font-family:微软雅黑;">地址</span><span style="font-family:Open Sans;font-size:9.754098px;">+ </span><span style="font-family:微软雅黑;font-size:8.778688px;">端口号</span><span style="font-size:9.754098px;">三元组合， 就可以标识网络中的进程了， 那么进程间的通信就可以利用这个标识与其</span></nobr></span><span style="position:absolute;top:535.106445px;left:69.810577px"><nobr>它进程进行交互。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:21.946720px;font-weight:bold;color:#333333;"><span style="position:absolute;top:563.633606px;left:69.810577px"><nobr>第二章<span style="font-family:Open Sans;">TCP </span><span style="font-family:微软雅黑;">通信程序</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:622.600342px;left:69.810577px"><nobr>2.1 <span style="font-family:微软雅黑;">概述</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:674.034607px;left:69.810577px"><nobr>TCP <span style="font-family:微软雅黑;">通信能实现两台计算机之间的数据交互， 通信的两端， 要严格区分为客户端（ </span><span style="font-family:Open Sans;">Client </span><span style="font-family:微软雅黑;">） 与服务端（ </span><span style="font-family:Open Sans;">Server </span><span style="font-family:微软雅黑;">） 。 </span></nobr></span><span style="position:absolute;top:704.177734px;left:69.810577px"><nobr><span style="font-family:微软雅黑;font-weight:bold;">两端通信时步骤： </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:734.060059px;left:86.036156px"><nobr>1. <span style="font-family:微软雅黑;">服务端程序， 需要事先启动， 等待客户端的连接。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:754.068542px;left:86.036156px"><nobr>2. <span style="font-family:微软雅黑;">客户端主动连接服务器端， 连接成功才能通信。 服务端不可以主动连接客户端。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:785.081543px;left:69.810577px"><nobr>在<span style="font-family:Open Sans;">J ava </span><span style="font-family:微软雅黑;">中， 提供了两个类用于实现</span><span style="font-family:Open Sans;">TCP </span><span style="font-family:微软雅黑;">通信程序： </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:815.093933px;left:86.036156px"><nobr>1. <span style="font-family:微软雅黑;">客户端： </span><span style="font-family:Consolas;font-size:8.778688px;">java.net.Socket </span><span style="font-family:微软雅黑;font-size:9.754098px;">类表示。 创建</span><span style="font-family:Consolas;font-size:8.778688px;">Socket </span><span style="font-family:微软雅黑;font-size:9.754098px;">对象， 向服务端发出连接请求， 服务端响应请求， 两者建</span></nobr></span><span style="position:absolute;top:835.232422px;left:99.823189px"><nobr><span style="font-family:微软雅黑;">立连接开始通信。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:855.110840px;left:86.036156px"><nobr>2. <span style="font-family:微软雅黑;">服务端： </span><span style="font-family:Consolas;font-size:8.778688px;">java.net.ServerSocket </span><span style="font-family:微软雅黑;font-size:9.754098px;">类表示。 创建</span><span style="font-family:Consolas;font-size:8.778688px;">ServerSocket </span><span style="font-family:微软雅黑;font-size:9.754098px;">对象， 相当于开启一个服务， 并等待客户端</span></nobr></span><span style="position:absolute;top:875.249329px;left:99.823189px"><nobr><span style="font-family:微软雅黑;">的连接。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:904.718872px;left:69.810577px"><nobr>2.2 Socket <span style="font-family:微软雅黑;">类</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:956.283203px;left:74.812683px"><nobr>Socket <span style="font-family:微软雅黑;font-size:9.754098px;">类： 该类实现客户端套接字， 套接字指的是两台设备之间通讯的端点。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:988.420227px;left:69.810577px"><nobr>构造方法</nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:119.933594px;left:82.503426px"><nobr>  <span style="color:#000000;">ipconfig </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:202.342117px;left:82.503426px"><nobr>  <span style="color:#000000;">ping </span><span style="color:#333333;">  </span><span style="font-family:微软雅黑;color:#000000;">空格</span><span style="font-family:Consolas;color:#333333;">  </span><span style="color:#000000;">IP </span><span style="font-family:微软雅黑;">地址</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#000000;"><span style="position:absolute;top:221.976563px;left:86.505104px"><nobr>ping <span style="color:#333333;">  </span><span style="color:#116644;">220.181 </span><span style="color:#333333;">. </span><span style="color:#116644;">57.216 </span></nobr></span></span></p>','<div style="position:absolute;top:76.316895px;left:0.000000px"><nobr><img height="970.000000" width="794.000000" src ="bgimg/bg00007.jpg"/></nobr></div><div style="position:absolute;top:75.167969px;left:99.541817px"><nobr><img height="20.000000" width="243.000000" src ="bgimg/bg00008.jpg"/></nobr></div><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:75.784019px;left:104.825294px"><nobr>public Socket(String host, int port) <span style="font-family:Open Sans;font-size:9.754098px;">: </span><span style="font-family:微软雅黑;">创建套接字对象并将其连接到指定主机上的指定端口号。 如果指</span></nobr></span><span style="position:absolute;top:95.792480px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-size:9.754098px;">定的</span><span style="font-family:Open Sans;">h ost </span><span style="font-family:微软雅黑;">是</span><span style="font-family:Open Sans;">n ull </span><span style="font-family:微软雅黑;">， 则相当于指定地址为回送地址。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#777777;"><span style="position:absolute;top:125.804848px;left:118.831177px"><nobr>小贴士： 回送地址<span style="font-family:Open Sans;">( 127.x.x.x) </span><span style="font-family:微软雅黑;">是本机回送地址（ </span><span style="font-family:Open Sans;">Loopback Address </span><span style="font-family:微软雅黑;">） ， 主要用于网络软件测试以及本</span></nobr></span><span style="position:absolute;top:145.943359px;left:118.831177px"><nobr>地机进程间通信， 无论什么程序， 一旦使用回送地址发送数据， 立即返回， 不进行任何网络传输。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:176.956375px;left:69.810577px"><nobr>构造举例， 代码如下： </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:259.114258px;left:69.810577px"><nobr>成员方法</nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:300.008453px;left:104.825294px"><nobr>public InputStream getInputStream() <span style="font-family:微软雅黑;font-size:9.754098px;">： 返回此套接字的输入流。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:326.889496px;left:129.835800px"><nobr>如果此<span style="font-family:Open Sans;">S coket </span><span style="font-family:微软雅黑;">具有相关联的通道， 则生成的</span><span style="font-family:Open Sans;">InputStream </span><span style="font-family:微软雅黑;">的所有操作也关联该通道。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:346.897949px;left:129.835800px"><nobr>关闭生成的<span style="font-family:Open Sans;">InputStream </span><span style="font-family:微软雅黑;">也将关闭相关的</span><span style="font-family:Open Sans;">S ocket </span><span style="font-family:微软雅黑;">。 </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:373.039063px;left:104.825294px"><nobr>public OutputStream getOutputStream() <span style="font-family:微软雅黑;font-size:9.754098px;">： 返回此套接字的输出流。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:399.920074px;left:129.835800px"><nobr>如果此<span style="font-family:Open Sans;">S coket </span><span style="font-family:微软雅黑;">具有相关联的通道， 则生成的</span><span style="font-family:Open Sans;">O utputStream </span><span style="font-family:微软雅黑;">的所有操作也关联该通道。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:419.928558px;left:129.835800px"><nobr>关闭生成的<span style="font-family:Open Sans;">O utputStream </span><span style="font-family:微软雅黑;">也将关闭相关的</span><span style="font-family:Open Sans;">S ocket </span><span style="font-family:微软雅黑;">。 </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:446.069672px;left:104.825294px"><nobr>public void close() <span style="font-family:微软雅黑;font-size:9.754098px;">： 关闭此套接字。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:472.950623px;left:129.835800px"><nobr>一旦一个<span style="font-family:Open Sans;">s ocket </span><span style="font-family:微软雅黑;">被关闭， 它不可再使用。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:492.959106px;left:129.835800px"><nobr>关闭此<span style="font-family:Open Sans;">s ocket </span><span style="font-family:微软雅黑;">也将关闭相关的</span><span style="font-family:Open Sans;">I nputStream </span><span style="font-family:微软雅黑;">和</span><span style="font-family:Open Sans;">O utputStream </span><span style="font-family:微软雅黑;">。 </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:519.100281px;left:104.825294px"><nobr>public void shutdownOutput() <span style="font-family:微软雅黑;font-size:9.754098px;">： 禁用此套接字的输出流。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:546.112000px;left:129.835800px"><nobr>任何先前写出的数据将被发送， 随后终止输出流。 </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:575.580811px;left:99.823189px"><nobr>2.3 ServerSocket <span style="font-family:微软雅黑;">类</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:626.145203px;left:74.812683px"><nobr>ServerSocket <span style="font-family:微软雅黑;font-size:9.754098px;">类： 这个类实现了服务器套接字， 该对象等待通过网络的请求。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:658.281494px;left:69.810577px"><nobr>构造方法</nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:699.045715px;left:104.825294px"><nobr>public ServerSocket(int port) <span style="font-family:微软雅黑;font-size:9.754098px;">： 使用该构造方法在创建</span><span style="font-family:Open Sans;">S erverSocket </span><span style="font-family:微软雅黑;">对象时， 就可以将其绑定到一个指</span></nobr></span><span style="position:absolute;top:719.054199px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-size:9.754098px;">定的端口号上， 参数</span><span style="font-family:Open Sans;">p ort </span><span style="font-family:微软雅黑;">就是端口号。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:750.197266px;left:69.810577px"><nobr>构造举例， 代码如下： </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:832.355164px;left:69.810577px"><nobr>成员方法</nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:873.119324px;left:104.825294px"><nobr>public Socket accept() <span style="font-family:微软雅黑;font-size:9.754098px;">： 侦听并接受连接， 返回一个新的</span><span style="font-family:Open Sans;">S ocket </span><span style="font-family:微软雅黑;">对象， 用于和客户端实现通信。 该方法</span></nobr></span><span style="position:absolute;top:893.257813px;left:99.823189px"><nobr><span style="font-family:微软雅黑;font-size:9.754098px;">会一直阻塞直到建立连接。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:922.726685px;left:69.810577px"><nobr>2.4 <span style="font-family:微软雅黑;">简单的</span><span style="font-family:Open Sans;">T CP </span><span style="font-family:微软雅黑;">网络程序</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:973.219177px;left:69.810577px"><nobr>TCP <span style="font-family:微软雅黑;">通信分析图解</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1014.178589px;left:86.036156px"><nobr>1. <span style="font-family:微软雅黑;">【 服务端】 启动</span><span style="font-family:Open Sans;">, </span><span style="font-family:微软雅黑;">创建</span><span style="font-family:Open Sans;">S erverSocket </span><span style="font-family:微软雅黑;">对象， 等待连接。 </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:220.976883px;left:82.503426px"><nobr>  <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">client </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Socket </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"127.0.0.1" </span><span style="color:#333333;">,  </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:794.217773px;left:82.503426px"><nobr>  <span style="color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00009.jpg"/></nobr></div><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:75.784019px;left:86.036156px"><nobr>2. <span style="font-family:微软雅黑;">【 客户端】 启动</span><span style="font-family:Open Sans;">, </span><span style="font-family:微软雅黑;">创建</span><span style="font-family:Open Sans;">S ocket </span><span style="font-family:微软雅黑;">对象， 请求连接。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:95.792480px;left:86.036156px"><nobr>3. <span style="font-family:微软雅黑;">【 服务端】 接收连接</span><span style="font-family:Open Sans;">, </span><span style="font-family:微软雅黑;">调用</span><span style="font-family:Open Sans;">a ccept </span><span style="font-family:微软雅黑;">方法， 并返回一个</span><span style="font-family:Open Sans;">S ocket </span><span style="font-family:微软雅黑;">对象。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:115.800941px;left:86.036156px"><nobr>4. <span style="font-family:微软雅黑;">【 客户端】 </span><span style="font-family:Open Sans;">Socket </span><span style="font-family:微软雅黑;">对象， 获取</span><span style="font-family:Open Sans;">O utputStream </span><span style="font-family:微软雅黑;">， 向服务端写出数据。 </span></nobr></span><span style="position:absolute;top:135.809402px;left:86.036156px"><nobr>5. <span style="font-family:微软雅黑;">【 服务端】 </span><span style="font-family:Open Sans;">Scoket </span><span style="font-family:微软雅黑;">对象， 获取</span><span style="font-family:Open Sans;">I nputStream </span><span style="font-family:微软雅黑;">， 读取客户端发送的数据。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#777777;"><span style="position:absolute;top:165.951828px;left:88.818565px"><nobr>到此， 客户端向服务端发送数据成功。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#777777;"><span style="position:absolute;top:454.072906px;left:88.818565px"><nobr>自此， 服务端向客户端回写数据。 </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:483.955200px;left:86.036156px"><nobr>6. <span style="font-family:微软雅黑;">【 服务端】 </span><span style="font-family:Open Sans;">Socket </span><span style="font-family:微软雅黑;">对象， 获取</span><span style="font-family:Open Sans;">OutputStream </span><span style="font-family:微软雅黑;">， 向客户端回写数据。 </span></nobr></span><span style="position:absolute;top:503.963654px;left:86.036156px"><nobr>7. <span style="font-family:微软雅黑;">【 客户端】 </span><span style="font-family:Open Sans;">Scoket </span><span style="font-family:微软雅黑;">对象， 获取</span><span style="font-family:Open Sans;">InputStream </span><span style="font-family:微软雅黑;">， 解析回写数据。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:523.972107px;left:86.036156px"><nobr>8. <span style="font-family:微软雅黑;">【 客户端】 释放资源， 断开连接。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:556.238525px;left:69.810577px"><nobr>客户端向服务器发送数据</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:597.132813px;left:69.810577px"><nobr>服务端实现： </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:641.153320px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">ServerTCP </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:659.160461px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span><span style="position:absolute;top:675.541321px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">服务端启动</span><span style="font-family:Consolas;">  ,  </span><span style="font-family:微软雅黑;">等待连接</span><span style="font-family:Consolas;">  .... " </span><span style="color:#333333;">); </span></nobr></span><span style="position:absolute;top:693.549133px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1. </span><span style="font-family:微软雅黑;">创建</span><span style="font-family:Consolas;">  ServerSocket </span><span style="font-family:微软雅黑;">对象， 绑定端口， 开始等待连接</span></nobr></span><span style="position:absolute;top:713.183289px;left:86.505104px"><nobr>         <span style="color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">ss </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:729.564148px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 2. </span><span style="font-family:微软雅黑;">接收连接</span><span style="font-family:Consolas;">  accept  </span><span style="font-family:微软雅黑;">方法</span><span style="font-family:Consolas;">,   </span><span style="font-family:微软雅黑;">返回</span><span style="font-family:Consolas;"> socket  </span><span style="font-family:微软雅黑;">对象</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:749.198914px;left:86.505104px"><nobr>         <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">ss </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:765.579102px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 3. </span><span style="font-family:微软雅黑;">通过</span><span style="font-family:Consolas;">s ocket  </span><span style="font-family:微软雅黑;">获取输入流</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:785.213867px;left:86.505104px"><nobr>         <span style="color:#000000;">InputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">is </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:801.594055px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 4. </span><span style="font-family:微软雅黑;">一次性读取数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:819.601868px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 4.1  </span><span style="font-family:微软雅黑;">创建字节数组</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:839.236633px;left:86.505104px"><nobr>         <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:855.616882px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 4.2  </span><span style="font-family:微软雅黑;">据读取到字节数组中</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:873.624695px;left:86.505104px"><nobr>         <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">is </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">) </span><span style="font-family:微软雅黑;color:#000000;">； </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:891.632507px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 4.3  </span><span style="font-family:微软雅黑;">解析数组</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">打印字符串信息</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:911.266602px;left:86.505104px"><nobr>         <span style="color:#008855;">String </span><span style="color:#333333;">  </span><span style="color:#000000;">msg </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">String </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:929.274414px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#000000;">msg </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:945.654602px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//5. </span><span style="font-family:微软雅黑;">关闭资源</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:965.289368px;left:86.505104px"><nobr>         <span style="color:#000000;">is </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:983.297180px;left:86.505104px"><nobr>         <span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1001.304382px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1029.316040px;left:86.505104px"><nobr>} </nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00010.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:96.922523px;left:69.810577px"><nobr>客户端实现： </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:414.179352px;left:69.810577px"><nobr>服务器向客户端回写数据</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:455.073578px;left:69.810577px"><nobr>服务端实现： </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:1024.312500px;left:69.810577px"><nobr>客户端实现： </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:141.943680px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">ClientTCP </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:159.950851px;left:86.505104px"><nobr>     <span style="font-family:Consolas;color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">Exception </span><span style="color:#333333;"> { </span></nobr></span><span style="position:absolute;top:176.331711px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">客户端</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">发送数据</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:194.338867px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 1. </span><span style="font-family:微软雅黑;">创建</span><span style="font-family:Consolas;">  Socket ( ip , port ) ,  </span><span style="font-family:微软雅黑;">确定连接到哪里</span><span style="font-family:Consolas;">. </span></nobr></span><span style="position:absolute;top:213.973633px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">client </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Socket </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"localhost" </span><span style="color:#333333;">,  </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span><span style="position:absolute;top:230.354492px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 2. </span><span style="font-family:微软雅黑;">获取流对象</span><span style="font-family:Consolas;">  .  </span><span style="font-family:微软雅黑;">输出流</span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:249.988602px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">OutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">os </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">client </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:266.369476px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 3. </span><span style="font-family:微软雅黑;">写出数据</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:284.377289px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">os </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">你好么</span><span style="font-family:Consolas;">?  tcp , </span><span style="font-family:微软雅黑;">我来了</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:302.384430px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 4.  </span><span style="font-family:微软雅黑;">关闭资源</span><span style="font-family:Consolas;">  . </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:322.019196px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">os </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:340.026367px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">client </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:358.034180px;left:86.505104px"><nobr>     <span style="font-family:Consolas;">} </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:376.041992px;left:86.505104px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:499.093414px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">ServerTCP </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:517.101257px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span><span style="position:absolute;top:533.481445px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">服务端启动</span><span style="font-family:Consolas;">  ,  </span><span style="font-family:微软雅黑;">等待连接</span><span style="font-family:Consolas;">  .... " </span><span style="color:#333333;">); </span></nobr></span><span style="position:absolute;top:551.489258px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1. </span><span style="font-family:微软雅黑;">创建</span><span style="font-family:Consolas;"> ServerSocket </span><span style="font-family:微软雅黑;">对象， 绑定端口， 开始等待连接</span></nobr></span><span style="position:absolute;top:571.124023px;left:86.505104px"><nobr>         <span style="color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">ss </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:587.504211px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 2. </span><span style="font-family:微软雅黑;">接收连接</span><span style="font-family:Consolas;">  accept  </span><span style="font-family:微软雅黑;">方法</span><span style="font-family:Consolas;">,   </span><span style="font-family:微软雅黑;">返回</span><span style="font-family:Consolas;">  socket  </span><span style="font-family:微软雅黑;">对象</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:607.138977px;left:86.505104px"><nobr>         <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">ss </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:623.519226px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 3. </span><span style="font-family:微软雅黑;">通过</span><span style="font-family:Consolas;">s ocket  </span><span style="font-family:微软雅黑;">获取输入流</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:643.153992px;left:86.505104px"><nobr>         <span style="color:#000000;">InputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">is </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:659.534851px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 4. </span><span style="font-family:微软雅黑;">一次性读取数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:677.541992px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 4.1  </span><span style="font-family:微软雅黑;">创建字节数组</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:697.176758px;left:86.505104px"><nobr>         <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:713.557617px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 4.2  </span><span style="font-family:微软雅黑;">据读取到字节数组中</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:731.564758px;left:86.505104px"><nobr>         <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">is </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">) </span><span style="font-family:微软雅黑;color:#000000;">； </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:749.572571px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 4.3  </span><span style="font-family:微软雅黑;">解析数组</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">打印字符串信息</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:769.206726px;left:86.505104px"><nobr>         <span style="color:#008855;">String </span><span style="color:#333333;">  </span><span style="color:#000000;">msg </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">String </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:787.214539px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#000000;">msg </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:803.595398px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// ================= </span><span style="font-family:微软雅黑;">回写数据</span><span style="font-family:Consolas;">= ====================== </span></nobr></span><span style="position:absolute;top:821.602539px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 5.  </span><span style="font-family:微软雅黑;">通过</span><span style="font-family:Consolas;">  socket  </span><span style="font-family:微软雅黑;">获取输出流</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:841.237305px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;">  </span><span style="color:#000000;">OutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">out </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:857.618164px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 6.  </span><span style="font-family:微软雅黑;">回写数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:875.625305px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;">  </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">我很好</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">谢谢你</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:893.633118px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 7. </span><span style="font-family:微软雅黑;">关闭资源</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:913.267273px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:931.275085px;left:86.505104px"><nobr>         <span style="color:#000000;">is </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:949.282898px;left:86.505104px"><nobr>         <span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:967.290039px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:985.297852px;left:86.505104px"><nobr>} </nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00011.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:21.946720px;font-weight:bold;color:#333333;"><span style="position:absolute;top:497.897888px;left:69.810577px"><nobr>第三章综合案例</nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:556.572388px;left:69.810577px"><nobr>3.1 <span style="font-family:微软雅黑;">文件上传案例</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:607.259399px;left:69.810577px"><nobr>文件上传分析图解</nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:648.023560px;left:86.036156px"><nobr>1. <span style="font-family:微软雅黑;">【 客户端】 输入流， 从硬盘读取文件数据到程序中。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:668.031982px;left:86.036156px"><nobr>2. <span style="font-family:微软雅黑;">【 客户端】 输出流， 写出文件数据到服务端。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:688.040527px;left:86.036156px"><nobr>3. <span style="font-family:微软雅黑;">【 服务端】 输入流， 读取文件数据到服务端程序。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:708.049011px;left:86.036156px"><nobr>4. <span style="font-family:微软雅黑;">【 服务端】 输出流， 写出文件数据到服务器硬盘中。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:12.192623px;font-weight:bold;color:#333333;"><span style="position:absolute;top:994.860901px;left:69.810577px"><nobr>基本实现</nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:84.918945px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">ClientTCP </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:102.926109px;left:86.505104px"><nobr>     <span style="font-family:Consolas;color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">Exception </span><span style="color:#333333;"> { </span></nobr></span><span style="position:absolute;top:119.306969px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">客户端</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">发送数据</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:137.314774px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 1. </span><span style="font-family:微软雅黑;">创建</span><span style="font-family:Consolas;">  Socket ( ip , port ) ,  </span><span style="font-family:微软雅黑;">确定连接到哪里</span><span style="font-family:Consolas;">. </span></nobr></span><span style="position:absolute;top:156.948898px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">client </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Socket </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"localhost" </span><span style="color:#333333;">,  </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span><span style="position:absolute;top:173.329758px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 2. </span><span style="font-family:微软雅黑;">通过</span><span style="font-family:Consolas;">S coket, </span><span style="font-family:微软雅黑;">获取输出流对象</span><span style="font-family:Consolas;">  </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:192.963867px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">OutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">os </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">client </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">(); </span></nobr></span><span style="position:absolute;top:209.344727px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 3. </span><span style="font-family:微软雅黑;">写出数据</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:227.352539px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">os </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">你好么</span><span style="font-family:Consolas;">?  tcp , </span><span style="font-family:微软雅黑;">我来了</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:245.359695px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// ============== </span><span style="font-family:微软雅黑;">解析回写</span><span style="font-family:Consolas;">= ======================== </span></nobr></span><span style="position:absolute;top:263.367523px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 4.  </span><span style="font-family:微软雅黑;">通过</span><span style="font-family:Consolas;">S coket, </span><span style="font-family:微软雅黑;">获取</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">输入流对象</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:283.002289px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#000000;">InputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">in </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">client </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:299.382477px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 5.  </span><span style="font-family:微软雅黑;">读取数据数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:319.017242px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">100 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:337.024414px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">in </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:355.032227px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">String </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">)); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:371.413086px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#AA5500;">// 6.  </span><span style="font-family:微软雅黑;">关闭资源</span><span style="font-family:Consolas;">  . </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:391.047211px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#000000;">in </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:409.055023px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">os </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:427.062836px;left:86.505104px"><nobr>         <span style="font-family:Consolas;color:#000000;">client </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:445.069977px;left:86.505104px"><nobr>     <span style="font-family:Consolas;">} </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:463.077789px;left:86.505104px"><nobr>} </nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00012.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:75.913414px;left:69.810577px"><nobr>服务端实现： </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:591.129578px;left:69.810577px"><nobr>客户端实现： </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:119.933266px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">FileUpload_Server </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:137.941086px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:154.321289px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">服务器</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">启动</span><span style="font-family:Consolas;">. ....  " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:172.329102px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1.  </span><span style="font-family:微软雅黑;">创建服务端</span><span style="font-family:Consolas;">S erverSocket </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:191.963867px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:208.344070px;left:86.505104px"><nobr>   <span style="font-family:Courier New;">       </span><span style="font-family:Consolas;color:#AA5500;">// 2.  </span><span style="font-family:微软雅黑;">建立连接</span><span style="font-family:Consolas;">  </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:227.978836px;left:86.505104px"><nobr>         <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">accept </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:244.359695px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 3.  </span><span style="font-family:微软雅黑;">创建流对象</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:262.366852px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 3.1  </span><span style="font-family:微软雅黑;">获取输入流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">读取文件数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:282.001617px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:298.381836px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 3.2  </span><span style="font-family:微软雅黑;">创建输出流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">保存到本地</span><span style="font-family:Consolas;">  . </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:318.016602px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bos </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileOutputStream </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"copy.jpg" </span><span style="color:#333333;">)); </span></nobr></span><span style="position:absolute;top:334.397461px;left:86.505104px"><nobr><span style="font-family:Courier New;">         </span><span style="font-family:Consolas;color:#AA5500;">// 4.  </span><span style="font-family:微软雅黑;">读写数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:354.031586px;left:86.505104px"><nobr>         <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">  </span><span style="color:#981A1A;">* </span><span style="color:#333333;">  </span><span style="color:#116644;">8 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:372.039398px;left:86.505104px"><nobr>         <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:390.047211px;left:86.505104px"><nobr>         <span style="color:#770088;">while </span><span style="color:#333333;"> (( </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">))  </span><span style="color:#981A1A;">!= </span><span style="color:#333333;">  </span><span style="color:#981A1A;">‐ </span><span style="color:#116644;">1 </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:408.054352px;left:86.505104px"><nobr>             <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:426.062164px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:442.442383px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//5.  </span><span style="font-family:微软雅黑;">关闭</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">资源</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:462.077148px;left:86.505104px"><nobr>         <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:480.084961px;left:86.505104px"><nobr>         <span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:498.092133px;left:86.505104px"><nobr>         <span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:514.472961px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">文件上传已保存</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:534.107727px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:552.114929px;left:86.505104px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:636.150085px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">FileUPload_Client </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:654.157898px;left:86.505104px"><nobr>     <span style="font-family:Consolas;color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:670.538757px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1. </span><span style="font-family:微软雅黑;">创建流对象</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:688.545898px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1.1  </span><span style="font-family:微软雅黑;">创建输入流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">读取本地文件</span><span style="font-family:Consolas;">   </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:708.180664px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">   </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileInputStream </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"test.jpg" </span><span style="color:#333333;">)); </span></nobr></span><span style="position:absolute;top:724.560852px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1.2  </span><span style="font-family:微软雅黑;">创建输出流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">写到服务端</span><span style="font-family:Consolas;">  </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:744.195618px;left:86.505104px"><nobr>         <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Socket </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"localhost" </span><span style="color:#333333;">,  </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:762.203430px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">    </span><span style="color:#000000;">bos </span><span style="color:#333333;">    </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">()); </span></nobr></span><span style="position:absolute;top:780.210632px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:796.591492px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//2. </span><span style="font-family:微软雅黑;">写出数据</span><span style="font-family:Consolas;">.   </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:816.226257px;left:86.505104px"><nobr>         <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">   </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">  </span><span style="color:#981A1A;">* </span><span style="color:#333333;">  </span><span style="color:#116644;">8 </span><span style="color:#333333;"> ]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:834.233398px;left:86.505104px"><nobr>         <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;"> ;  </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:852.241211px;left:86.505104px"><nobr>         <span style="color:#770088;">while </span><span style="color:#333333;"> ((  </span><span style="color:#000000;">len </span><span style="color:#333333;">   </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">)) </span><span style="color:#981A1A;">!= ‐ </span><span style="color:#116644;">1 </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:870.248352px;left:86.505104px"><nobr>             <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:888.256165px;left:86.505104px"><nobr>             <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">flush </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:906.263977px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:922.644226px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">文件发送完毕</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:940.652039px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 3. </span><span style="font-family:微软雅黑;">释放资源</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:960.286804px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:978.293945px;left:86.505104px"><nobr>         <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">();  </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:996.301758px;left:86.505104px"><nobr>         <span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1029.315430px;left:86.505104px"><nobr>         <span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">();  </span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00013.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:150.067383px;left:69.810577px"><nobr>文件上传优化分析</nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:190.831543px;left:86.036156px"><nobr>1. <span style="font-family:微软雅黑;font-weight:bold;">文件名称写死的问题</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:217.972656px;left:99.823189px"><nobr>服务端， 保存文件的名称如果写死， 那么最终导致服务器硬盘， 只会保留一个文件， 建议使用系统时间优</nobr></span><span style="position:absolute;top:237.981125px;left:99.823189px"><nobr>化， 保证文件名称唯一， 代码如下： </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:338.894043px;left:86.036156px"><nobr>2. <span style="font-family:微软雅黑;font-weight:bold;">循环接收的问题</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:366.034515px;left:99.823189px"><nobr>服务端， 指保存一个文件就关闭了， 之后的用户无法再上传， 这是不符合实际的， 使用循环改进， 可以不断</nobr></span><span style="position:absolute;top:386.043610px;left:99.823189px"><nobr>的接收不同用户的文件， 代码如下： </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:540.978638px;left:86.036156px"><nobr>3. <span style="font-family:微软雅黑;font-weight:bold;">效率问题</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:567.119141px;left:99.823189px"><nobr>服务端， 在接收大文件时， 可能耗费几秒钟的时间， 此时不能接收其他用户上传， 所以， 使用多线程技术优</nobr></span><span style="position:absolute;top:587.128235px;left:99.823189px"><nobr>化， 代码如下： </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:12.192623px;font-weight:bold;color:#333333;"><span style="position:absolute;top:813.784668px;left:69.810577px"><nobr>优化实现</nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:74.288086px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">文件上传完毕</span><span style="font-family:Consolas;">  " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Courier New;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:93.922203px;left:86.505104px"><nobr>     <span style="font-family:Consolas;">} </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:111.930016px;left:86.505104px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:280.374664px;left:82.503426px"><nobr>  <span style="color:#000000;">FileOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">fis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">currentTimeMillis </span><span style="color:#333333;">() </span><span style="color:#981A1A;">+ </span><span style="color:#AA1111;">".jpg" </span><span style="color:#333333;">)  </span><span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">文件名称</span></nobr></span><span style="position:absolute;top:300.008789px;left:86.505104px"><nobr><span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bos </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">fis </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:428.436523px;left:82.503426px"><nobr>  <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">每次接收新的连接</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">创建一个</span><span style="font-family:Consolas;">S ocket </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#000000;"><span style="position:absolute;top:446.444336px;left:86.505104px"><nobr>while <span style="font-family:微软雅黑;">（ </span><span style="font-family:Consolas;">true </span><span style="font-family:微软雅黑;">） </span><span style="font-family:Consolas;color:#333333;">{ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:466.079102px;left:86.505104px"><nobr>     <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">accept </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:484.086914px;left:86.505104px"><nobr>    ...... </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:502.093414px;left:86.505104px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:630.521179px;left:82.503426px"><nobr>  <span style="color:#000000;">while </span><span style="font-family:微软雅黑;">（ </span><span style="font-family:Consolas;">true </span><span style="font-family:微软雅黑;">） </span><span style="font-family:Consolas;color:#333333;">{ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:650.155945px;left:86.505104px"><nobr>     <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">accept </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:666.536804px;left:86.505104px"><nobr>     <span style="color:#AA5500;">// accept  </span><span style="font-family:微软雅黑;">交给子线程处理</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:686.171570px;left:86.505104px"><nobr>     <span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Thread </span><span style="color:#333333;">(()  </span><span style="color:#981A1A;">‐&gt; </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:704.179382px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;">...... </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:722.185852px;left:86.505104px"><nobr>         <span style="color:#000000;">InputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:740.193665px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;">...... </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:758.201477px;left:86.505104px"><nobr>    }). <span style="color:#000000;">start </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:776.209290px;left:86.505104px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:861.244446px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">FileUpload_Server </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:879.252258px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:895.633118px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">服务器</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">启动</span><span style="font-family:Consolas;">. ....  " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:913.640930px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1.  </span><span style="font-family:微软雅黑;">创建服务端</span><span style="font-family:Consolas;">ServerSocket </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:933.275696px;left:86.505104px"><nobr>         <span style="color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:949.655273px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">// 2.  </span><span style="font-family:微软雅黑;">循环接收</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">建立连接</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:969.290039px;left:86.505104px"><nobr>         <span style="color:#770088;">while </span><span style="color:#333333;"> ( </span><span style="color:#221199;">true </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:987.297852px;left:86.505104px"><nobr>             <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">accept </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1005.305664px;left:86.505104px"><nobr>           <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">/*  </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1027.689087px;left:86.505104px"><nobr>           <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">3. socket </span><span style="font-family:微软雅黑;">对象交给子线程处理</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">进行读写操作</span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00014.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:600.257446px;left:69.810577px"><nobr>信息回写分析图解</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:641.021606px;left:69.810577px"><nobr>前四步与基本文件上传一致<span style="font-family:Open Sans;">. </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:672.034607px;left:86.036156px"><nobr>5. <span style="font-family:微软雅黑;">【 服务端】 获取输出流， 回写数据。 </span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:692.042480px;left:86.036156px"><nobr>6. <span style="font-family:微软雅黑;">【 客户端】 获取输入流， 解析回写数据。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:12.192623px;font-weight:bold;color:#333333;"><span style="position:absolute;top:987.858948px;left:69.810577px"><nobr>回写实现</nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:74.288086px;left:86.505104px"><nobr>                <span style="color:#AA5500;">Runnable </span><span style="font-family:微软雅黑;">接口中</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">只有一个</span><span style="font-family:Consolas;">r un </span><span style="font-family:微软雅黑;">方法</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">使用</span><span style="font-family:Consolas;">l ambda </span><span style="font-family:微软雅黑;">表达式简化格式</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:93.922852px;left:86.505104px"><nobr>             <span style="color:#AA5500;">*/ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:111.930664px;left:86.505104px"><nobr>             <span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Thread </span><span style="color:#333333;">(()  </span><span style="color:#981A1A;">‐&gt; </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:129.938477px;left:86.505104px"><nobr>                 <span style="color:#770088;">try </span><span style="color:#333333;"> ( </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:146.319336px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">//3.1  </span><span style="font-family:微软雅黑;">获取输入流对象</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:165.952805px;left:86.505104px"><nobr>                     <span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">()); </span></nobr></span><span style="position:absolute;top:182.333664px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">//3.2  </span><span style="font-family:微软雅黑;">创建输出流对象</span><span style="font-family:Consolas;">,   </span><span style="font-family:微软雅黑;">保存到本地</span><span style="font-family:Consolas;">  . </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:201.968430px;left:86.505104px"><nobr>                     <span style="color:#000000;">FileOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">fis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">currentTimeMillis </span><span style="color:#333333;">()  </span><span style="color:#981A1A;">+ </span><span style="color:#333333;">  </span></nobr></span><span style="position:absolute;top:219.976242px;left:86.505104px"><nobr><span style="color:#AA1111;">".jpg" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:237.984055px;left:86.505104px"><nobr>                     <span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bos </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">fis </span><span style="color:#333333;">);) { </span></nobr></span><span style="position:absolute;top:254.363602px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">// 3.3  </span><span style="font-family:微软雅黑;">读写数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:273.998383px;left:86.505104px"><nobr>                     <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">  </span><span style="color:#981A1A;">* </span><span style="color:#333333;">  </span><span style="color:#116644;">8 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:292.006195px;left:86.505104px"><nobr>                     <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:310.014008px;left:86.505104px"><nobr>                     <span style="color:#770088;">while </span><span style="color:#333333;"> (( </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">))  </span><span style="color:#981A1A;">!= </span><span style="color:#333333;">  </span><span style="color:#981A1A;">‐ </span><span style="color:#116644;">1 </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:328.021820px;left:86.505104px"><nobr>                       <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:346.028320px;left:86.505104px"><nobr>                    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:362.409180px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">//4.  </span><span style="font-family:微软雅黑;">关闭</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">资源</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:382.043945px;left:86.505104px"><nobr>                     <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:400.051758px;left:86.505104px"><nobr>                     <span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:418.059570px;left:86.505104px"><nobr>                     <span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:434.440430px;left:86.505104px"><nobr>                     <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">文件上传已保存</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:454.073883px;left:86.505104px"><nobr>                }  <span style="color:#770088;">catch </span><span style="color:#333333;"> ( </span><span style="color:#000000;">IOException </span><span style="color:#333333;">  </span><span style="color:#000000;">e </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:472.081696px;left:86.505104px"><nobr>                   <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#000000;">e </span><span style="color:#333333;">. </span><span style="color:#000000;">printStackTrace </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:490.089508px;left:86.505104px"><nobr>                } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:508.097321px;left:86.505104px"><nobr>            }). <span style="color:#000000;">start </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:526.105164px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:544.111633px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:562.119446px;left:86.505104px"><nobr>} </nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00015.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:952.281921px;left:69.810577px"><nobr>客户端实现： </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:84.918945px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">FileUpload_Server </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:102.925453px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:119.306313px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">服务器</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">启动</span><span style="font-family:Consolas;">. ....  " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:137.314133px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1.  </span><span style="font-family:微软雅黑;">创建服务端</span><span style="font-family:Consolas;">S erverSocket </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:156.948898px;left:86.505104px"><nobr>         <span style="color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:173.329758px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 2.  </span><span style="font-family:微软雅黑;">循环接收</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">建立连接</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:192.964523px;left:86.505104px"><nobr>         <span style="color:#770088;">while </span><span style="color:#333333;"> ( </span><span style="color:#221199;">true </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:210.971024px;left:86.505104px"><nobr>             <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">accept </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">serverSocket </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:228.978836px;left:86.505104px"><nobr>           <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">/* </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:245.359695px;left:86.505104px"><nobr>           <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">3. socket </span><span style="font-family:微软雅黑;">对象交给子线程处理</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">进行读写操作</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:263.367523px;left:86.505104px"><nobr>                <span style="color:#AA5500;">Runnable </span><span style="font-family:微软雅黑;">接口中</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">只有一个</span><span style="font-family:Consolas;">run </span><span style="font-family:微软雅黑;">方法</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">使用</span><span style="font-family:Consolas;">lambda </span><span style="font-family:微软雅黑;">表达式简化格式</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:283.002289px;left:86.505104px"><nobr>             <span style="color:#AA5500;">*/ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:301.008789px;left:86.505104px"><nobr>             <span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Thread </span><span style="color:#333333;">(()  </span><span style="color:#981A1A;">‐&gt; </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:319.016602px;left:86.505104px"><nobr>                 <span style="color:#770088;">try </span><span style="color:#333333;"> ( </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:335.397461px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">//3.1  </span><span style="font-family:微软雅黑;">获取输入流对象</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:355.032227px;left:86.505104px"><nobr>                     <span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">()); </span></nobr></span><span style="position:absolute;top:371.413086px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">//3.2  </span><span style="font-family:微软雅黑;">创建输出流对象</span><span style="font-family:Consolas;">,   </span><span style="font-family:微软雅黑;">保存到本地</span><span style="font-family:Consolas;">  . </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:391.046539px;left:86.505104px"><nobr>                     <span style="color:#000000;">FileOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">fis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">currentTimeMillis </span><span style="color:#333333;">()  </span><span style="color:#981A1A;">+ </span><span style="color:#333333;">  </span></nobr></span><span style="position:absolute;top:409.054352px;left:86.505104px"><nobr><span style="color:#AA1111;">".jpg" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:427.062164px;left:86.505104px"><nobr>                     <span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bos </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">fis </span><span style="color:#333333;">); </span></nobr></span><span style="position:absolute;top:445.069977px;left:86.505104px"><nobr>                ) { </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:461.450836px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">// 3.3  </span><span style="font-family:微软雅黑;">读写数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:481.085602px;left:86.505104px"><nobr>                     <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">  </span><span style="color:#981A1A;">* </span><span style="color:#333333;">  </span><span style="color:#116644;">8 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:499.092133px;left:86.505104px"><nobr>                     <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:517.099915px;left:86.505104px"><nobr>                     <span style="color:#770088;">while </span><span style="color:#333333;"> (( </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">))  </span><span style="color:#981A1A;">!= </span><span style="color:#333333;">  </span><span style="color:#981A1A;">‐ </span><span style="color:#116644;">1 </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:535.107727px;left:86.505104px"><nobr>                         <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:553.115540px;left:86.505104px"><nobr>                    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:571.123352px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:587.502930px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">// 4.======= </span><span style="font-family:微软雅黑;">信息回写</span><span style="font-family:Consolas;">= ========================== </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:607.137695px;left:86.505104px"><nobr>                     <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"back ........" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:625.145508px;left:86.505104px"><nobr>                     <span style="color:#000000;">OutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">out </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:641.526367px;left:86.505104px"><nobr>                     <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">上传成功</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:661.161133px;left:86.505104px"><nobr>                     <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:679.167664px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">//================================ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:697.175476px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:713.556335px;left:86.505104px"><nobr>                     <span style="color:#AA5500;">//5.  </span><span style="font-family:微软雅黑;">关闭</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">资源</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:733.191101px;left:86.505104px"><nobr>                     <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:751.198914px;left:86.505104px"><nobr>                     <span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:769.205383px;left:86.505104px"><nobr>                     <span style="color:#000000;">accept </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:785.586243px;left:86.505104px"><nobr>                     <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">文件上传已保存</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:805.221008px;left:86.505104px"><nobr>                }  <span style="color:#770088;">catch </span><span style="color:#333333;"> ( </span><span style="color:#000000;">IOException </span><span style="color:#333333;">  </span><span style="color:#000000;">e </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:823.228821px;left:86.505104px"><nobr>                     <span style="color:#000000;">e </span><span style="color:#333333;">. </span><span style="color:#000000;">printStackTrace </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:841.236633px;left:86.505104px"><nobr>                } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:859.244446px;left:86.505104px"><nobr>            }). <span style="color:#000000;">start </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:877.250977px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:895.258789px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:913.266602px;left:86.505104px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:997.301758px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">FileUpload_Client </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1029.314819px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00016.jpg"/></nobr></div><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:619.011169px;left:69.810577px"><nobr>  </nobr></span></span></p><p><span style="font-family:Open Sans;font-size:17.069672px;font-weight:bold;color:#333333;"><span style="position:absolute;top:648.610779px;left:69.810577px"><nobr>3.2 <span style="font-family:微软雅黑;">模拟</span><span style="font-family:Open Sans;">B \S </span><span style="font-family:微软雅黑;">服务器</span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:700.176453px;left:69.810577px"><nobr>模拟网站服务器， 使用浏览器访问自己编写的服务端程序， 查看网页效果。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:732.312195px;left:69.810577px"><nobr>案例分析</nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:773.076355px;left:86.036156px"><nobr>1. <span style="font-family:微软雅黑;">准备页面数据， </span><span style="font-family:Open Sans;">web </span><span style="font-family:微软雅黑;">文件夹。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:800.088074px;left:99.823189px"><nobr>复制到我们<span style="font-family:Open Sans;">M odule </span><span style="font-family:微软雅黑;">中， 比如复制到</span><span style="font-family:Open Sans;">d ay08 </span><span style="font-family:微软雅黑;">中</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:985.166260px;left:86.036156px"><nobr>2. <span style="font-family:微软雅黑;">我们模拟服务器端， </span><span style="font-family:Open Sans;">ServerSocket </span><span style="font-family:微软雅黑;">类监听端口， 使用浏览器访问</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:74.288086px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1. </span><span style="font-family:微软雅黑;">创建流对象</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:92.295898px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1.1  </span><span style="font-family:微软雅黑;">创建输入流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">读取本地文件</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:111.930664px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedInputStream </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileInputStream </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"test.jpg" </span><span style="color:#333333;">)); </span></nobr></span><span style="position:absolute;top:128.311523px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 1.2  </span><span style="font-family:微软雅黑;">创建输出流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">写到服务端</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:147.944992px;left:86.505104px"><nobr>         <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Socket </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"localhost" </span><span style="color:#333333;">,  </span><span style="color:#116644;">6666 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:165.952805px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">bos </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedOutputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:183.960617px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:200.341476px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//2. </span><span style="font-family:微软雅黑;">写出数据</span><span style="font-family:Consolas;">. </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:219.976242px;left:86.505104px"><nobr>         <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">b </span><span style="color:#333333;">   </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">  </span><span style="color:#981A1A;">* </span><span style="color:#333333;">  </span><span style="color:#116644;">8 </span><span style="color:#333333;"> ]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:237.984055px;left:86.505104px"><nobr>         <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;"> ; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:255.990555px;left:86.505104px"><nobr>         <span style="color:#770088;">while </span><span style="color:#333333;"> ((  </span><span style="color:#000000;">len </span><span style="color:#333333;">   </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">)) </span><span style="color:#981A1A;">!= ‐ </span><span style="color:#116644;">1 </span><span style="color:#333333;">) { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:273.998383px;left:86.505104px"><nobr>             <span style="color:#000000;">bos </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#000000;">b </span><span style="color:#333333;">,  </span><span style="color:#116644;">0 </span><span style="color:#333333;">,  </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:292.006195px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:308.387054px;left:86.505104px"><nobr>       <span style="font-family:Courier New;">   </span><span style="font-family:Consolas;color:#AA5500;">//  </span><span style="font-family:微软雅黑;">关闭输出流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">通知服务端</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">写出数据完毕</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:328.021820px;left:86.505104px"><nobr>         <span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">shutdownOutput </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:344.401367px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">文件发送完毕</span><span style="font-family:Consolas;">" </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:362.409180px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 3. ===== </span><span style="font-family:微软雅黑;">解析回写</span><span style="font-family:Consolas;">= =========== </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:382.043945px;left:86.505104px"><nobr>         <span style="color:#000000;">InputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">in </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:400.051758px;left:86.505104px"><nobr>         <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">back </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">20 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:418.059570px;left:86.505104px"><nobr>         <span style="color:#000000;">in </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">back </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:436.066071px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">String </span><span style="color:#333333;">( </span><span style="color:#000000;">back </span><span style="color:#333333;">)); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:454.073883px;left:86.505104px"><nobr>         <span style="color:#000000;">in </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:472.081696px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// ============================ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:490.089508px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:506.470367px;left:86.505104px"><nobr>         <span style="color:#AA5500;">// 4. </span><span style="font-family:微软雅黑;">释放资源</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:526.103821px;left:86.505104px"><nobr>         <span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:544.111633px;left:86.505104px"><nobr>         <span style="color:#000000;">bis </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:562.119446px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:580.127258px;left:86.505104px"><nobr>} </nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00017.jpg"/></nobr></div><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:434.934418px;left:86.036156px"><nobr>3. <span style="font-family:微软雅黑;">服务器程序中字节输入流可以读取到浏览器发来的请求信息</span></nobr></span></span></p><p><span style="font-family:Open Sans;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:580.995544px;left:69.810577px"><nobr>GET/web/index.html HTTP/1.1 <span style="font-family:微软雅黑;">是浏览器的请求消息。 </span><span style="font-family:Open Sans;">/web/index.html </span><span style="font-family:微软雅黑;">为浏览器想要请求的服务器端的资源</span><span style="font-family:Open Sans;">, </span><span style="font-family:微软雅黑;">使用</span></nobr></span><span style="position:absolute;top:601.133484px;left:69.810577px"><nobr><span style="font-family:微软雅黑;">字符串切割方式获取到请求的资源。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:809.344727px;left:69.810577px"><nobr>案例实现</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:850.238953px;left:69.810577px"><nobr>服务端实现： </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:84.918945px;left:112.516029px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#0000FF;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span><span style="position:absolute;top:102.925453px;left:116.517715px"><nobr>     <span style="font-family:Courier New;">     </span><span style="font-family:Consolas;color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">8000 </span><span style="color:#333333;">); </span></nobr></span><span style="position:absolute;top:120.933266px;left:116.517715px"><nobr>     <span style="font-family:Courier New;">     </span><span style="font-family:Consolas;color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:138.941086px;left:116.517715px"><nobr>     <span style="font-family:Courier New;">     </span><span style="font-family:Consolas;color:#000000;">InputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">in </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:156.948898px;left:116.517715px"><nobr>    <span style="font-family:Courier New;">  </span><span style="font-family:Consolas;">     </span><span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">bytes </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:174.956711px;left:116.517715px"><nobr>     <span style="font-family:Courier New;">     </span><span style="font-family:Consolas;color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">in </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">bytes </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:192.963211px;left:116.517715px"><nobr>     <span style="font-family:Courier New;">     </span><span style="font-family:Consolas;color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">String </span><span style="color:#333333;">( </span><span style="color:#000000;">bytes </span><span style="color:#333333;">, </span><span style="color:#116644;">0 </span><span style="color:#333333;">, </span><span style="color:#000000;">len </span><span style="color:#333333;">)); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:210.971024px;left:116.517715px"><nobr>     <span style="font-family:Courier New;">     </span><span style="font-family:Consolas;color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:228.978836px;left:116.517715px"><nobr>     <span style="font-family:Courier New;">     </span><span style="font-family:Consolas;color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:246.986649px;left:116.517715px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:643.526367px;left:82.503426px"><nobr>  <span style="color:#AA5500;">// </span><span style="font-family:微软雅黑;">转换流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">读取浏览器请求第一行</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#000000;"><span style="position:absolute;top:663.161133px;left:86.505104px"><nobr>BufferedReader <span style="color:#333333;">  </span><span style="color:#000000;">readWb </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">BufferedReader </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">InputStreamReader </span><span style="color:#333333;">( </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">())); </span></nobr></span><span style="position:absolute;top:681.168945px;left:86.505104px"><nobr><span style="color:#008855;">String </span><span style="color:#333333;">  </span><span style="color:#000000;">requst </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">readWb </span><span style="color:#333333;">. </span><span style="color:#000000;">readLine </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#AA5500;"><span style="position:absolute;top:697.549805px;left:86.505104px"><nobr>// <span style="font-family:微软雅黑;">取出请求资源的路径</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#008855;"><span style="position:absolute;top:717.184570px;left:86.505104px"><nobr>String <span style="color:#333333;">[]  </span><span style="color:#000000;">strArr </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">requst </span><span style="color:#333333;">. </span><span style="color:#000000;">split </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#AA5500;"><span style="position:absolute;top:733.564148px;left:86.505104px"><nobr>// <span style="font-family:微软雅黑;">去掉</span><span style="font-family:Consolas;">w eb </span><span style="font-family:微软雅黑;">前面的</span><span style="font-family:Consolas;">/ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#008855;"><span style="position:absolute;top:753.198914px;left:86.505104px"><nobr>String <span style="color:#333333;">  </span><span style="color:#000000;">path </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">strArr </span><span style="color:#333333;">[ </span><span style="color:#116644;">1 </span><span style="color:#333333;">]. </span><span style="color:#000000;">substring </span><span style="color:#333333;">( </span><span style="color:#116644;">1 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#000000;"><span style="position:absolute;top:771.206726px;left:86.505104px"><nobr>System <span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#000000;">path </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:894.258789px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">SerDemo </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:912.266602px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:928.646179px;left:86.505104px"><nobr>         <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" </span><span style="font-family:微软雅黑;">服务端</span><span style="font-family:Consolas;">    </span><span style="font-family:微软雅黑;">启动</span><span style="font-family:Consolas;">  ,  </span><span style="font-family:微软雅黑;">等待连接</span><span style="font-family:Consolas;">  .... " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:946.653992px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">创建</span><span style="font-family:Consolas;">S erverSocket  </span><span style="font-family:微软雅黑;">对象</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:966.288757px;left:86.505104px"><nobr>         <span style="color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">8888 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:984.296570px;left:86.505104px"><nobr>         <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1000.677429px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">转换流读取浏览器的请求消息</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:1029.314819px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedReader </span><span style="color:#333333;">  </span><span style="color:#000000;">readWb </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span></nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00018.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:14.631147px;font-weight:bold;color:#333333;"><span style="position:absolute;top:600.257446px;left:69.810577px"><nobr>访问效果</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:641.150391px;left:99.823189px"><nobr>火狐</nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#777777;"><span style="position:absolute;top:930.272766px;left:88.818565px"><nobr>小贴士： 不同的浏览器， 内核不一样， 解析效果有可能不一样。 </nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:960.154541px;left:69.810577px"><nobr>发现浏览器中出现很多的叉子<span style="font-family:Open Sans;">, </span><span style="font-family:微软雅黑;">说明浏览器没有读取到图片信息导致。 </span></nobr></span></span></p><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:990.167542px;left:69.810577px"><nobr>浏览器工作原理是遇到图片会开启一个线程进行单独的访问<span style="font-family:Open Sans;">, </span><span style="font-family:微软雅黑;">因此在服务器端加入线程技术。 </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:75.915039px;left:86.505104px"><nobr>         <span style="color:#000000;">BufferedReader </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">InputStreamReader </span><span style="color:#333333;">( </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">())); </span></nobr></span><span style="position:absolute;top:93.922852px;left:86.505104px"><nobr>         <span style="color:#008855;">String </span><span style="color:#333333;">  </span><span style="color:#000000;">requst </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">readWb </span><span style="color:#333333;">. </span><span style="color:#000000;">readLine </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:110.303711px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">取出请求资源的路径</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:129.938477px;left:86.505104px"><nobr>         <span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">strArr </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">requst </span><span style="color:#333333;">. </span><span style="color:#000000;">split </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:146.318039px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">去掉</span><span style="font-family:Consolas;">w eb </span><span style="font-family:微软雅黑;">前面的</span><span style="font-family:Consolas;">/ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:165.952805px;left:86.505104px"><nobr>         <span style="color:#008855;">String </span><span style="color:#333333;">  </span><span style="color:#000000;">path </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">strArr </span><span style="color:#333333;">[ </span><span style="color:#116644;">1 </span><span style="color:#333333;">]. </span><span style="color:#000000;">substring </span><span style="color:#333333;">( </span><span style="color:#116644;">1 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:182.333664px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">读取客户端请求的资源文件</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:201.968430px;left:86.505104px"><nobr>         <span style="color:#000000;">FileInputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">fis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileInputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">path </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:219.976242px;left:86.505104px"><nobr>         <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">bytes </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:237.982742px;left:86.505104px"><nobr>         <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#116644;">0 </span><span style="color:#333333;"> ; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:254.363602px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">字节输出流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">将文件写会客户端</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:273.998383px;left:86.505104px"><nobr>         <span style="color:#000000;">OutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">out </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:290.379242px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">写入</span><span style="font-family:Consolas;">H TTP </span><span style="font-family:微软雅黑;">协议响应头</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">固定写法</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:310.014008px;left:86.505104px"><nobr>         <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"HTTP/1.1 200 OK\r\n" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:328.020508px;left:86.505104px"><nobr>         <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"Content ‐Type:text/html\r\n" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:344.401367px;left:86.505104px"><nobr>         <span style="color:#AA5500;">//  </span><span style="font-family:微软雅黑;">必须要写入空行</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">否则浏览器不解析</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:364.036133px;left:86.505104px"><nobr>         <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"\r\n" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:382.043945px;left:86.505104px"><nobr>         <span style="color:#770088;">while </span><span style="color:#333333;">(( </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">fis </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">bytes </span><span style="color:#333333;">)) </span><span style="color:#981A1A;">!= ‐ </span><span style="color:#116644;">1 </span><span style="color:#333333;">){ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:400.051758px;left:86.505104px"><nobr>             <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#000000;">bytes </span><span style="color:#333333;">, </span><span style="color:#116644;">0 </span><span style="color:#333333;">, </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:418.059570px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:436.066071px;left:86.505104px"><nobr>         <span style="color:#000000;">fis </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:454.073883px;left:86.505104px"><nobr>         <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:472.081696px;left:86.505104px"><nobr>         <span style="color:#000000;">readWb </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span><span style="font-family:Courier New;">  </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:490.089508px;left:86.505104px"><nobr>         <span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:508.097321px;left:86.505104px"><nobr>         <span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:526.103821px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:544.111633px;left:86.505104px"><nobr>} </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:562.119446px;left:86.505104px"><nobr>  </nobr></span></span></p>','<div style="position:absolute;top:85.255043px;left:0.000000px"><nobr><img height="949.000000" width="794.000000" src ="bgimg/bg00019.jpg"/></nobr></div><div style="position:absolute;top:74.166664px;left:69.529213px"><nobr><img height="917.000000" width="655.000000" src ="bgimg/bg00020.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-weight:bold;color:#333333;"><span style="position:absolute;top:1006.304016px;left:69.810577px"><nobr>访问效果： </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:84.917641px;left:82.503426px"><nobr>  <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">ServerDemo </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:102.925453px;left:86.505104px"><nobr>     <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">main </span><span style="color:#333333;">( </span><span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">args </span><span style="color:#333333;">)  </span><span style="color:#770088;">throws </span><span style="color:#333333;">  </span><span style="color:#000000;">IOException </span><span style="color:#333333;"> { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:120.933266px;left:86.505104px"><nobr>         <span style="color:#000000;">ServerSocket </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">ServerSocket </span><span style="color:#333333;">( </span><span style="color:#116644;">8888 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:138.941086px;left:86.505104px"><nobr>         <span style="color:#770088;">while </span><span style="color:#333333;">( </span><span style="color:#221199;">true </span><span style="color:#333333;">){ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:156.948898px;left:86.505104px"><nobr>             <span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">server </span><span style="color:#333333;">. </span><span style="color:#000000;">accept </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:174.956711px;left:86.505104px"><nobr>             <span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Thread </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">Web </span><span style="color:#333333;">( </span><span style="color:#000000;">socket </span><span style="color:#333333;">)). </span><span style="color:#000000;">start </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:192.963211px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:210.971024px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:228.978836px;left:86.505104px"><nobr>     <span style="color:#770088;">static </span><span style="color:#333333;">  </span><span style="color:#770088;">class </span><span style="color:#333333;">  </span><span style="color:#0000FF;">Web </span><span style="color:#333333;">  </span><span style="color:#770088;">implements </span><span style="color:#333333;">  </span><span style="color:#000000;">Runnable </span><span style="color:#333333;">{ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:246.986649px;left:86.505104px"><nobr>         <span style="color:#770088;">private </span><span style="color:#333333;">  </span><span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:264.994476px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:283.000977px;left:86.505104px"><nobr>         <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#000000;">Web </span><span style="color:#333333;">( </span><span style="color:#000000;">Socket </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">){ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:301.008789px;left:86.505104px"><nobr>             <span style="color:#770088;">this </span><span style="color:#333333;">. </span><span style="color:#000000;">socket </span><span style="color:#981A1A;">= </span><span style="color:#000000;">socket </span><span style="color:#333333;">; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:319.016602px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:337.024414px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:355.032227px;left:86.505104px"><nobr>         <span style="color:#770088;">public </span><span style="color:#333333;">  </span><span style="color:#008855;">void </span><span style="color:#333333;">  </span><span style="color:#000000;">run </span><span style="color:#333333;">() { </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:373.038727px;left:86.505104px"><nobr>             <span style="color:#770088;">try </span><span style="color:#333333;">{ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:389.419586px;left:86.505104px"><nobr>                 <span style="color:#AA5500;">// </span><span style="font-family:微软雅黑;">转换流</span><span style="font-family:Consolas;">, </span><span style="font-family:微软雅黑;">读取浏览器请求第一行</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:409.054352px;left:86.505104px"><nobr>                 <span style="color:#000000;">BufferedReader </span><span style="color:#333333;">  </span><span style="color:#000000;">readWb </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:427.062164px;left:86.505104px"><nobr>                         <span style="color:#000000;">BufferedReader </span><span style="color:#333333;">( </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">InputStreamReader </span><span style="color:#333333;">( </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getInputStream </span><span style="color:#333333;">())); </span></nobr></span><span style="position:absolute;top:445.069977px;left:86.505104px"><nobr>                 <span style="color:#008855;">String </span><span style="color:#333333;">  </span><span style="color:#000000;">requst </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">readWb </span><span style="color:#333333;">. </span><span style="color:#000000;">readLine </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:461.450836px;left:86.505104px"><nobr>                 <span style="color:#AA5500;">// </span><span style="font-family:微软雅黑;">取出请求资源的路径</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:481.084320px;left:86.505104px"><nobr>                 <span style="color:#008855;">String </span><span style="color:#333333;">[]  </span><span style="color:#000000;">strArr </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">requst </span><span style="color:#333333;">. </span><span style="color:#000000;">split </span><span style="color:#333333;">( </span><span style="color:#AA1111;">" " </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:499.092133px;left:86.505104px"><nobr>                 <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#000000;">Arrays </span><span style="color:#333333;">. </span><span style="color:#000000;">toString </span><span style="color:#333333;">( </span><span style="color:#000000;">strArr </span><span style="color:#333333;">)); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:517.099915px;left:86.505104px"><nobr>                 <span style="color:#008855;">String </span><span style="color:#333333;">  </span><span style="color:#000000;">path </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">strArr </span><span style="color:#333333;">[ </span><span style="color:#116644;">1 </span><span style="color:#333333;">]. </span><span style="color:#000000;">substring </span><span style="color:#333333;">( </span><span style="color:#116644;">1 </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:535.107727px;left:86.505104px"><nobr>                 <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#000000;">path </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:553.115540px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:571.122070px;left:86.505104px"><nobr>                 <span style="color:#000000;">FileInputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">fis </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#000000;">FileInputStream </span><span style="color:#333333;">( </span><span style="color:#000000;">path </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:589.129883px;left:86.505104px"><nobr>                 <span style="color:#000000;">System </span><span style="color:#333333;">. </span><span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">println </span><span style="color:#333333;">( </span><span style="color:#000000;">fis </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:607.137695px;left:86.505104px"><nobr>                 <span style="color:#008855;">byte </span><span style="color:#333333;">[]  </span><span style="color:#000000;">bytes </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#770088;">new </span><span style="color:#333333;">  </span><span style="color:#008855;">byte </span><span style="color:#333333;">[ </span><span style="color:#116644;">1024 </span><span style="color:#333333;">]; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:625.145508px;left:86.505104px"><nobr>                 <span style="color:#008855;">int </span><span style="color:#333333;">  </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#116644;">0 </span><span style="color:#333333;"> ; </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:641.526367px;left:86.505104px"><nobr>                 <span style="color:#AA5500;">// </span><span style="font-family:微软雅黑;">向浏览器</span><span style="font-family:Consolas;">  </span><span style="font-family:微软雅黑;">回写数据</span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:661.159851px;left:86.505104px"><nobr>                 <span style="color:#000000;">OutputStream </span><span style="color:#333333;">  </span><span style="color:#000000;">out </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">getOutputStream </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:679.167664px;left:86.505104px"><nobr>                 <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"HTTP/1.1 200 OK\r\n" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:697.175476px;left:86.505104px"><nobr>                 <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"Content ‐Type:text/html\r\n" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:715.183289px;left:86.505104px"><nobr>                 <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#AA1111;">"\r\n" </span><span style="color:#333333;">. </span><span style="color:#000000;">getBytes </span><span style="color:#333333;">()); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:733.191101px;left:86.505104px"><nobr>                 <span style="color:#770088;">while </span><span style="color:#333333;">(( </span><span style="color:#000000;">len </span><span style="color:#333333;">  </span><span style="color:#981A1A;">= </span><span style="color:#333333;">  </span><span style="color:#000000;">fis </span><span style="color:#333333;">. </span><span style="color:#000000;">read </span><span style="color:#333333;">( </span><span style="color:#000000;">bytes </span><span style="color:#333333;">)) </span><span style="color:#981A1A;">!= ‐ </span><span style="color:#116644;">1 </span><span style="color:#333333;">){ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:751.197571px;left:86.505104px"><nobr>                     <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">write </span><span style="color:#333333;">( </span><span style="color:#000000;">bytes </span><span style="color:#333333;">, </span><span style="color:#116644;">0 </span><span style="color:#333333;">, </span><span style="color:#000000;">len </span><span style="color:#333333;">); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:769.205383px;left:86.505104px"><nobr>                } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:787.213196px;left:86.505104px"><nobr>                 <span style="color:#000000;">fis </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:805.221008px;left:86.505104px"><nobr>                 <span style="color:#000000;">out </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:823.228821px;left:86.505104px"><nobr>                 <span style="color:#000000;">readWb </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:841.236633px;left:86.505104px"><nobr>                 <span style="color:#000000;">socket </span><span style="color:#333333;">. </span><span style="color:#000000;">close </span><span style="color:#333333;">(); </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:859.243164px;left:86.505104px"><nobr>            } <span style="color:#770088;">catch </span><span style="color:#333333;">( </span><span style="color:#000000;">Exception </span><span style="color:#333333;">  </span><span style="color:#000000;">ex </span><span style="color:#333333;">){ </span></nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:877.250977px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:895.258789px;left:86.505104px"><nobr>            } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:913.266602px;left:86.505104px"><nobr>        } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:931.274414px;left:86.505104px"><nobr>    } </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:949.280945px;left:86.505104px"><nobr>  </nobr></span></span></p><p><span style="font-family:Consolas;font-size:8.778688px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:967.288757px;left:86.505104px"><nobr>} </nobr></span></span></p>','<div style="position:absolute;top:0.000000px;left:0.000000px"><nobr><img height="1122.000000" width="794.000000" src ="bgimg/bg00021.jpg"/></nobr></div><p><span style="font-family:微软雅黑;font-size:9.754098px;font-style:normal;font-weight:normal;color:#333333;"><span style="position:absolute;top:354.030609px;left:69.810577px"><nobr>图解： </nobr></span></span></p>']
            }
        },
        mounted: function() {
            this.$nextTick(function() {
                this.pageNum = this.pageDatas.length;
                this.pageContent = this.pageDatas[0];

                this.setLeftMenuHeight();
            })
        },
        watch: {
            'currentPage': function(newVal, oldValue) {
                // console.log('newVal ' + newVal, 'oldValue ' + oldValue);
                if (newVal) {
                    this.pageContent = this.pageDatas[this.currentPage - 1];
                }
            },
            'zoomNum': function(newVal, oldValue) {
                if (newVal) {
                    this.zoomStyle = {
                        'transform': 'scale(' + newVal + ')',
                        '-webkit-transform': 'scale(' + newVal + ')',
                        '-ms-transform': 'scale(' + newVal + ')',
                        '-moz-transform': 'scale(' + newVal + ')',
                        '-o-transform': 'scale(' + newVal + ')'
                    }
                }
            }
        },
        methods: {
            
            changeCurrentPage: function(methods) {
                switch (methods) {
                    case 'first':
                        this.currentPage = 1;
                        break;
                    case 'prev':
                        if (this.currentPage > 1) {
                            this.currentPage -= 1;
                        }
                        break;
                    case 'next':
                        if (this.currentPage < this.pageNum) {
                            this.currentPage += 1;
                        }
                        break;
                    case 'last':
                        this.currentPage = this.pageNum;
                        break;
                }
            },

            gotoPage: function(page) {
                console.log(page);
                this.currentPage = page;
            },
            modifyZoom: function(type) {
                switch (type) {
                    case 'in':
                        if (this.zoomNum < 2) {
                            // this.zoomNum = (this.zoomNum + 0.1).toFixed(1);
                            this.zoomNum = (parseFloat(this.zoomNum) + 0.1).toFixed(1);
                        }
                        break;
                    case 'out':
                        if (this.zoomNum > 0.5) {
                            this.zoomNum = (parseFloat(this.zoomNum) - 0.1).toFixed(1);
                        }
                        break;
                    default:
                        break;
                }
                console.log(this.zoomNum);
            },
            setLeftMenuHeight: function() {
                // this.asideHeight = document.body.scrollHeight - 60;
                this.mainHeight = document.documentElement.clientHeight - 60 - 20;
                // 60为头部导航高度， 46为menu高度， 40为上下padding
                this.asideHeight = this.mainHeight - 20 - 46;
            },
            changePage: function(page) {
                this.currentPage = page;
                // this.pageContent = this.pageDatas[page - 1];
            },
            changeLeftMenu: function() {
                this.ifMenuShow = !this.ifMenuShow;
            }
        }
    });

function gotoPage(page) {
    console.log(page);
    app.gotoPage(page);
}

</script>

</html>